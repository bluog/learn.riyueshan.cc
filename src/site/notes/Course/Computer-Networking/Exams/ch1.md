---
{"dg-publish":true,"dg-path":"Computer-NetworkingExams/ch1.md","permalink":"/computer-networking-exams/ch1/","updated":"2025-11-16T18:34:20.352+08:00"}
---

# 计算机网络 Chapter 1：基础、性能与体系结构详解

## 0. 核心概览 (Overview)

本章是计算机网络的基石，主要回答了“什么是网络”、“网络怎么衡量快慢”以及“网络怎么设计”这三个问题。

- **定义**：物理上由链路和设备连接，功能上实现数据传输（信息服务、资源共享）。
- **目标**：提升资源利用率。
- **组成**：
  - **硬件**：主机 (Host/End System)、网络设备 (交换机 Switch, 路由器 Router)、链路 (Link)。
  - **软件**：操作系统 (OS)、网络操作系统 (如 Cisco IOS, Huawei VRP)。
  - **协议 (Protocol)**：通信的规则，核心是“包头 + 数据”。

## 一、 互联网基础 (The Internet)

### 1. "internet" vs "Internet"

这是概念题中的常见陷阱。

- **internet (互连网)**：通用名词。指多个计算机网络互连而成的网络。任何将两个网络连接起来的系统都可以叫 internet。
- **Internet (互联网/因特网)**：专用名词。指全球最大的、开放的、由 ISP (Internet Service Provider) 互相连接的那个特定的网络。
  - **起源**：ARPANET (冷战时期军方项目)。
  - **发展**：ARPANET (军用验证) $\to$ NSFNET (科研基金资助) $\to$ ISP (商业化运营)。
  - **接入方式**：用户必须通过 ISP (如电信、移动) 接入。

### 2. 网络拓扑与 ISP 结构 (对应作业 Q48)

互联网不是平面的，而是分层的等级结构：

- **边缘部分 (Edge)**：用户的主机、智能设备。
- **核心部分 (Core)**：由大量路由器和网络互连而成，负责数据交换。
- **ISP 分层**：
  - **Tier-1 ISP**：国家/国际级主干网，拥有高速光纤，彼此互连 (Peering)。
  - **Tier-2 ISP**：区域级，向 Tier-1 付费购买流量。
  - **Access ISP (接入网)**：直接面向终端用户 (如小区的宽带)。
- **IXP (Internet Exchange Point)**：不同 ISP 之间直接交换流量的物理连接点，为了加速和节省跨网成本。

## 二、 网络性能指标 (Performance Metrics) —— 计算题核心

这是作业中最需要计算的部分 (**Q1, Q9, Q10, Q35**)。

### 1. 速率与带宽 (Rate & Bandwidth)

- **速率 (Data Rate)**：数据传输的速度，单位 `b/s` (bps)。
  - 注意单位换算：$k=10^3, M=10^6, G=10^9$ (网络传输中通常使用十进制)。
- **带宽 (Bandwidth)**：在数字信道中，指主要传输介质的**最大数据率**。
- **吞吐量 (Throughput)**：**实际**通过网络的数据量。受限于路径中带宽最小的链路（瓶颈链路）。

### 2. 时延 (Delay/Latency) —— 重点详解

总时延 $d_{total} = d_{proc} + d_{queue} + d_{trans} + d_{prop}$

| 类型         | 英文         | 定义                                 | 决定因素                   | 公式/性质                                                    |
| ------------ | ------------ | ------------------------------------ | -------------------------- | ------------------------------------------------------------ |
| **处理时延** | Processing   | 路由器检查包头、查路由表、纠错的时间 | 硬件性能、CPU速度          | 通常很小 (微秒级)，作业计算常忽略                            |
| **排队时延** | Queueing     | 分组在路由器缓存中排队等待发送的时间 | 网络拥塞程度               | **最不可控**，随流量动态变化                                 |
| **发送时延** | Transmission | 将数据推送到链路上所需的时间         | **数据长度**、**接口带宽** | $$d_{trans} = L/R$$  ($L$: 分组长度 bits, $R$: 链路带宽 bps) |
| **传播时延** | Propagation  | 信号在物理介质中传播的时间           | **物理距离**、**传播速度** | $$d_{prop} = d/s$$  ($d$: 距离 m, $s$: 介质光速 m/s)         |

#### 🟢 典型场景分析 (作业题解题思路)

- **Q35 (发送图像)**：**纯发送时延问题**。
  - 核心：$T = \text{数据总量} / \text{带宽}$。
  - 细节：图像大小 = 像素数 $\times$ 3 Byte $\times$ 8 bits。
  - 注意：$56 \text{kb/s} = 56 \times 10^3 \text{b/s}$。
- **Q1 (渡鸦运卷轴)**：**非典型链路的“高带宽、高延迟”**。
  - 这类问题是对于“带宽”定义的思想实验。
  - **情况①② (有限数据)**：$\text{速率} = \text{数据量} / \text{飞行时间}$。飞行时间 = 160km / 40km/h = 4小时。
  - **情况③ (无限数据流)**：这里有个陷阱。如果要源源不断地传，渡鸦必须飞过去卸货，再飞回来取货。
    - **循环周期** = 去程时间 + 回程时间（假设卸货/装货时间忽略）。
    - **有效速率** = $\text{单次携带量} / (\text{去程} + \text{回程})$。即 $1.8\text{TB} / 8\text{小时}$。
- **Q9 (卫星通信)**：**RTT (往返时间) 问题**。
  - 卫星在太空，属于传播时延主导。
  - **路径解析**：
        1. Client $\to$ Satellite (上行)
        2. Satellite $\to$ Server (下行)
        3. Server 处理 (题目问“最佳”，假设为0)
        4. Server $\to$ Satellite (响应上行)
        5. Satellite $\to$ Client (响应下行)
  - 总路程 = $4 \times \text{卫星高度}$。
  - 总时延 = $\text{总路程} / \text{光速}$。
- **Q10 (光速传播)**：简单物理题。
  - 距离 = 速度 $\times$ 时间。注意单位统一 (ms $\to$ s)。

### 3. 时延带宽积 (Delay-Bandwidth Product)

- 公式：$\text{传播时延} \times \text{带宽}$。
- 物理意义：以比特为单位的链路长度。代表了链路上充满了多少数据（“在途数据”）。

## 三、 网络体系结构 (Network Architecture)

### 1. 分层思想 (Layering)

- **为什么分层？** (对应补充题)
    1. **解耦合**：将复杂的大问题拆解为小问题。
    2. **独立性**：下层技术的改变（如光纤替换铜缆）不影响上层应用（如浏览器不用重写）。
    3. **标准化**：便于不同厂商设备互通。
- **缺点**：
    1. **开销 (Overhead)**：层层加头，导致有效载荷比例下降。
    2. **功能冗余**：每层都可能做差错检测。

### 2. 两大参考模型详解 (OSI vs TCP/IP)

这是网络学习的核心框架。OSI 是法律上的国际标准（理想模型），而 TCP/IP 是事实上的国际标准（实际应用）。

#### A. OSI 七层模型 (Open Systems Interconnection)

ISO 组织制定的理论模型，虽然未在商业上完全成功，但其术语（如“物理层”、“应用层”）被广泛使用。

| 层次 (Layer) | 名称                       | 核心功能详解                                                 | 典型协议/设备                    |
| ------------ | -------------------------- | ------------------------------------------------------------ | -------------------------------- |
| **第7层**    | **应用层 (Application)**   | **为用户的应用程序提供网络服务接口**。直接处理用户数据，如发邮件、浏览网页。 | HTTP, SMTP, FTP, DNS             |
| **第6层**    | **表示层 (Presentation)**  | **处理数据的语法和语义**。负责数据的加密/解密、压缩/解压、编码转换（如 ASCII 转 EBCDIC）。 | SSL/TLS (加密), JPEG/MPEG (压缩) |
| **第5层**    | **会话层 (Session)**       | **建立、管理和终止会话**。负责在两个通信应用之间进行对话控制（半双工/全双工）和同步（断点续传）。 | RPC, NetBIOS                     |
| **第4层**    | **传输层 (Transport)**     | **负责端到端的进程通信**。提供可靠（TCP）或不可靠（UDP）的数据传输；流量控制；多路复用（端口号）。 | TCP, UDP                         |
| **第3层**    | **网络层 (Network)**       | **负责主机到主机的路由选择 (Routing)**。将数据包从源主机跨越多个网络传送到目的主机。**作业 Q25(b) 考点**。 | **IP协议**, 路由器 (Router)      |
| **第2层**    | **数据链路层 (Data Link)** | **负责相邻节点间的可靠传输**。将网络层数据**封装成帧 (Framing)**；物理寻址 (MAC地址)；差错检测。**作业 Q25(a) 考点**。 | Ethernet, Wi-Fi, 交换机 (Switch) |
| **第1层**    | **物理层 (Physical)**      | **传输原始比特流 (Bits)**。定义电压规范、接口形状、线缆标准。 | 网线, 光纤, 集线器 (Hub)         |

> **记忆口诀**：**A**ll **P**eople **S**eem **T**o **N**eed **D**ata **P**rocessing (应用-表示-会话-传输-网络-数据链路-物理)

#### B. TCP/IP 四层模型 (Internet Protocol Suite)

实际互联网使用的模型，更加务实，将 OSI 的上三层合并，下两层模糊化。

| TCP/IP 层次                        | 对应 OSI                 | 功能描述                                                     |
| ---------------------------------- | ------------------------ | ------------------------------------------------------------ |
| **应用层 (Application)**           | 应用层 + 表示层 + 会话层 | 将 OSI 上三层功能合并。应用程序直接处理所有细节（如 HTTP 协议内部处理编码和会话）。 |
| **传输层 (Transport)**             | 传输层                   | 功能与 OSI 传输层一致。核心协议是 TCP 和 UDP。               |
| **网际层 (Internet)**              | 网络层                   | 对应 OSI 网络层。**核心是 IP 协议**。设计原则是“沙漏模型”——IP 协议支持所有上层应用和下层物理网络。 |
| **网络接口层 (Network Interface)** | 数据链路层 + 物理层      | TCP/IP 模型未严格定义这一层，只要求能连接到网络即可（“Host-to-Network”）。 |

#### C. 两个模型的关键区别

1. **服务与协议**：OSI 明确区分了服务、接口和协议；TCP/IP 在这方面区分得不明显。
2. **连接模式**：
    - OSI 网络层支持面向连接和无连接；传输层仅支持面向连接。
    - TCP/IP 网络层仅支持无连接 (IP)；传输层支持面向连接 (TCP) 和无连接 (UDP)。**这对互联网的爆发式增长至关重要**。

### 3. 封装与开销计算 (Encapsulation) —— (对应作业 Q28)

- **过程**：
  - 应用层产生 Message ($M$)。
  - 传输层加头 ($H_t$) $\to$ Segment。
  - 网络层加头 ($H_n$) $\to$ Datagram/Packet。
  - 链路层加头 ($H_l$) $\to$ Frame。
- **Q28 解题模型**：
  - 假设有 $L$ 层，每层加头 $h$ 字节。
  - 原始数据：$M$。
  - 总头部：$L \times h$。
  - **头部占比 (Overhead Ratio)** = $\frac{L \times h}{M + L \times h}$。
  - **效率 (Efficiency)** = $\frac{M}{M + L \times h}$。

## 四、 补充概念 (From ch1.md)

- **协议 (Protocol)**：
  - 网络通信的“语言”。
  - 三要素：**语法** (Syntax, 格式)、**语义** (Semantics, 含义)、**时序** (Timing, 顺序)。
- **IPv4 & IPv6**：
  - IPv4 地址耗尽，推动向 IPv6 过渡。
- **健壮性 (Robustness)**：
  - 互联网设计初衷之一（抗核战争，Q30背景）。采用**分组交换**和**分布式路由算法**，使得部分节点被摧毁后，网络能自动寻找其他路径。
